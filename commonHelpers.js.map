{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport Notiflix from 'notiflix';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet searchQuery = '';\nlet firstSearch = true;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const input = form.elements['searchQuery'];\n  searchQuery = input.value.trim();\n  currentPage = 1;\n  loadMoreBtn.style.display = 'none';\n  firstSearch = true;\n  if (searchQuery !== '') {\n    await fetchImages(searchQuery, currentPage);\n  } else {\n    iziToast.show({\n      title: 'Hey',\n      message:\n        'The search text is empty. Enter the information you want to find.',\n    });\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  await fetchImages(searchQuery, currentPage);\n});\n\nasync function fetchImages(query, page) {\n  const API_KEY = '42310710-0bcfa885b8d0bd9d4e21f3c00';\n  const PER_PAGE = 40;\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: PER_PAGE,\n      },\n    });\n\n    const data = response.data;\n    if (data.hits.length === 0) {\n      gallery.innerHTML = '';\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n      });\n      return;\n    }\n    if (page === 1) {\n      gallery.innerHTML = '';\n      if (firstSearch) {\n        iziToast.success({\n          title: 'Success',\n          message: `Hooray! We found ${data.totalHits} images.`,\n        });\n        firstSearch = false;\n      }\n    }\n    data.hits.forEach(image => {\n      const card = createImageCard(image);\n      gallery.appendChild(card);\n    });\n    if (data.totalHits <= page * PER_PAGE) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.error(error.message);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images',\n    });\n  }\n}\n\nfunction createImageCard({\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  const card = document.createElement('div');\n  card.classList.add('photo-card');\n  card.innerHTML = `\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n  <div class=\"info\">\n    <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n    <p class=\"info-item\"><b>Views:</b> ${views}</p>\n    <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n    <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p> \n  </div>\n    `;\n  return card;\n}\n"],"names":["form","gallery","loadMoreBtn","currentPage","searchQuery","firstSearch","event","fetchImages","iziToast","query","page","API_KEY","BASE_URL","data","axios","image","card","createImageCard","error","webformatURL","tags","likes","views","comments","downloads"],"mappings":"6vBAIA,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAc,GACdC,EAAc,GAElBL,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAC7CA,EAAM,eAAc,EAEpBF,EADcJ,EAAK,SAAS,YACR,MAAM,OAC1BG,EAAc,EACdD,EAAY,MAAM,QAAU,OAC5BG,EAAc,GACVD,IAAgB,GAClB,MAAMG,EAAYH,EAAaD,CAAW,EAE1CK,EAAS,KAAK,CACZ,MAAO,MACP,QACE,mEACR,CAAK,CAEL,CAAC,EAEDN,EAAY,iBAAiB,QAAS,SAAY,CAChDC,IACA,MAAMI,EAAYH,EAAaD,CAAW,CAC5C,CAAC,EAED,eAAeI,EAAYE,EAAOC,EAAM,CACtC,MAAMC,EAAU,qCAEVC,EAAW,2BAEjB,GAAI,CAaF,MAAMC,GAZW,MAAMC,EAAM,IAAIF,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GAEqB,KACtB,GAAIG,EAAK,KAAK,SAAW,EAAG,CAC1BZ,EAAQ,UAAY,GACpBO,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,EACD,MACD,CACGE,IAAS,IACXT,EAAQ,UAAY,GAChBI,IACFG,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oBAAoBK,EAAK,SAAS,UACrD,CAAS,EACDR,EAAc,KAGlBQ,EAAK,KAAK,QAAQE,GAAS,CACzB,MAAMC,EAAOC,EAAgBF,CAAK,EAClCd,EAAQ,YAAYe,CAAI,CAC9B,CAAK,EACGH,EAAK,WAAaH,EAAO,IAC3BR,EAAY,MAAM,QAAU,OAC5BM,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAEDN,EAAY,MAAM,QAAU,OAE/B,OAAQgB,EAAO,CACd,QAAQ,MAAMA,EAAM,OAAO,EAC3BV,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACf,CAAK,CACF,CACH,CAEA,SAASS,EAAgB,CACvB,aAAAE,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAMR,EAAO,SAAS,cAAc,KAAK,EACzC,OAAAA,EAAK,UAAU,IAAI,YAAY,EAC/BA,EAAK,UAAY;AAAA,cACLG,CAAY,UAAUC,CAAI;AAAA;AAAA,yCAECC,CAAK;AAAA,yCACLC,CAAK;AAAA,4CACFC,CAAQ;AAAA,6CACPC,CAAS;AAAA;AAAA,MAG7CR,CACT"}